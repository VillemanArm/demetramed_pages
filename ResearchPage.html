<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/normalize.css">
    <link rel="stylesheet" href="./css/ResearchPage.css">
    <title>Demetramed</title>
</head>
<body>
    <header class="header">
        <RouterLink to="/">
            <div class="header__logo">
                <img
                    src="./img/logo.svg"
                    alt="Demetramed"
                />
            </div>
        </RouterLink>
        <div class="header__toolbar">
            <a href="#" class="header__icon" >
                <svg
                    width="32"
                    height="32"
                    viewBox="0 0 32 32"
                    fill="#A5A4A5"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M13.3956 10.9751C14.0786 8.926 16.7819 8.48731 18.0779 10.2153C18.837 11.2274 18.7841 12.6328 17.9509 13.585L16.7253 14.9857C15.613 16.257 14.9998 17.8888 14.9998 19.5779V20.0001C14.9998 20.5524 15.4476 21.0001 15.9998 21.0001C16.5521 21.0001 16.9998 20.5524 16.9998 20.0001V19.5779C16.9998 18.3732 17.4371 17.2094 18.2304 16.3027L19.4561 14.902C20.9115 13.2386 21.004 10.7835 19.6779 9.01525C17.4139 5.99665 12.6914 6.76301 11.4982 10.3426L11.0512 11.6839C10.8765 12.2078 11.1597 12.7741 11.6836 12.9488C12.2076 13.1234 12.7739 12.8403 12.9485 12.3163L13.3956 10.9751Z"
                        fill="evenodd"
                    />
                    <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M15.9998 1.66675C8.08376 1.66675 1.6665 8.084 1.6665 16.0001C1.6665 23.9162 8.08376 30.3334 15.9998 30.3334C23.9159 30.3334 30.3332 23.9162 30.3332 16.0001C30.3332 8.084 23.9159 1.66675 15.9998 1.66675ZM3.6665 16.0001C3.6665 9.18857 9.18832 3.66675 15.9998 3.66675C22.8113 3.66675 28.3332 9.18857 28.3332 16.0001C28.3332 22.8116 22.8113 28.3334 15.9998 28.3334C9.18832 28.3334 3.6665 22.8116 3.6665 16.0001Z"
                        fill="evenodd"
                    />
                    <path
                        d="M17.3332 24.0001C17.3332 24.7365 16.7362 25.3334 15.9998 25.3334C15.2635 25.3334 14.6665 24.7365 14.6665 24.0001C14.6665 23.2637 15.2635 22.6667 15.9998 22.6667C16.7362 22.6667 17.3332 23.2637 17.3332 24.0001Z"
                        fill="evenodd"
                    />
                </svg>
            </a>
            <a href="#" class="header__icon" >
                <svg
                    width="32"
                    height="32"
                    viewBox="0 0 32 32"
                    fill="#A5A4A5"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M15.9998 10.9999C13.2383 10.9999 10.9998 13.2385 10.9998 15.9999C10.9998 18.7614 13.2383 20.9999 15.9998 20.9999C18.7612 20.9999 20.9998 18.7614 20.9998 15.9999C20.9998 13.2385 18.7612 10.9999 15.9998 10.9999ZM12.9998 15.9999C12.9998 14.3431 14.3429 12.9999 15.9998 12.9999C17.6566 12.9999 18.9998 14.3431 18.9998 15.9999C18.9998 17.6568 17.6566 18.9999 15.9998 18.9999C14.3429 18.9999 12.9998 17.6568 12.9998 15.9999Z"
                        fill="evenodd"
                    />
                    <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M20.5527 4.30965C19.2455 -0.27086 12.754 -0.270859 11.4468 4.30965C11.0418 5.72886 9.58373 6.57067 8.15215 6.21182C3.53171 5.05365 0.28597 10.6754 3.5992 14.0978C4.62575 15.1581 4.62575 16.8418 3.5992 17.9021C0.285969 21.3245 3.53171 26.9462 8.15215 25.7881C9.58373 25.4292 11.0418 26.271 11.4468 27.6902C12.754 32.2707 19.2455 32.2707 20.5527 27.6902C20.9577 26.271 22.4158 25.4292 23.8474 25.7881C28.4678 26.9462 31.7136 21.3245 28.4003 17.9021C27.3738 16.8418 27.3738 15.1581 28.4003 14.0978C31.7136 10.6754 28.4678 5.05365 23.8474 6.21182C22.4158 6.57067 20.9577 5.72886 20.5527 4.30965ZM13.37 4.85851C14.1251 2.21285 17.8745 2.21285 18.6295 4.85851C19.3307 7.31563 21.8551 8.77308 24.3337 8.15181C27.0024 7.48286 28.8771 10.7299 26.9634 12.7066C25.1861 14.5425 25.1861 17.4574 26.9634 19.2932C28.8771 21.2699 27.0024 24.517 24.3337 23.8481C21.8551 23.2268 19.3307 24.6843 18.6295 27.1414C17.8745 29.787 14.1251 29.787 13.37 27.1414C12.6688 24.6843 10.1444 23.2268 7.66587 23.8481C4.99715 24.517 3.12244 21.2699 5.03613 19.2932C6.81344 17.4574 6.81344 14.5425 5.03613 12.7066C3.12244 10.7299 4.99715 7.48286 7.66587 8.15181C10.1444 8.77308 12.6688 7.31563 13.37 4.85851Z"
                        fill="evenodd"
                    />
                </svg>
            </a>
            <div class="header__user">
                <img
                    src="./img/user.png"
                    alt=""
                />
            </div>
        </div>
    </header>
    <main>
        <div class="toolbar">
            <input
                type="text"
                placeholder="Поиск"
                clear-icon="close"
                class="toolbar__search"


            >
                <template v-slot:prepend>
                    <SearchIcon style="width: 20rem; height: 20rem" />
                </template>
                <template v-slot:append>
                    <q-icon
                        v-if="NavStore.searchQuery"
                        name="close"
                        @click="NavStore.searchQuery = ''"
                        class="cursor-pointer"
                        size="20rem"
                    />
                </template>
            </input>
            <div class="toolbar__nav">
                <a href="#" class="toolbar__option toolbar__option--active">
                    Исследования
                </a>
                <a href="#" class="toolbar__option">
                    Отчеты
                </a>
            </div>
        </div>
        <div class="nav__viewer">
            <div class="list">
                <div
        class="list-toolbar"
        v-if="!researchStore.isNewResearchForm"
    >
        <button
            class="list-toolbar__button"
        >
        <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="white"
            stroke="white"
            xmlns="http://www.w3.org/2000/svg"
        >
            <g clip-path="url(#clip0_261_529)">
                <path
                    d="M10.6252 3.33325C10.6252 2.98807 10.3453 2.70825 10.0002 2.70825C9.65498 2.70825 9.37516 2.98807 9.37516 3.33325L9.37516 9.37492H3.3335C2.98832 9.37492 2.7085 9.65474 2.7085 9.99992C2.7085 10.3451 2.98832 10.6249 3.3335 10.6249H9.37516V16.6666C9.37516 17.0118 9.65498 17.2916 10.0002 17.2916C10.3453 17.2916 10.6252 17.0118 10.6252 16.6666V10.6249H16.6668C17.012 10.6249 17.2918 10.3451 17.2918 9.99992C17.2918 9.65474 17.012 9.37492 16.6668 9.37492H10.6252L10.6252 3.33325Z"
                    fill="evenodd"
                    stroke="evenodd"
                    stroke-width="4"
                    stroke-linecap="round"
                />
            </g>
            <defs>
                <clipPath id="clip0_261_529">
                    <rect
                        width="20"
                        height="20"
                        fill="evenodd"
                    />
                </clipPath>
            </defs>
        </svg>
            <span>Добавить исследование</span>
        </button>
        <div class="list-toolbar__filter">
            <div class="list-toolbar__filter-option">
                <span>По дате</span>
                <div class="list-toolbar__sort-direction">
                    <NextIcon
                        @click="
                            researchStore.setSortRequestParameters(
                                'date',
                                false
                            )
                        "
                        :class="{
                            'list-toolbar__sort-direction--active':
                                researchStore.listRequestParameters
                                    .sortOption === 'date' &&
                                researchStore.listRequestParameters
                                    .sortDescending === false,
                        }"
                    />
                    <NextIcon
                        @click="
                            researchStore.setSortRequestParameters('date', true)
                        "
                        :class="{
                            'list-toolbar__sort-direction--active':
                                researchStore.listRequestParameters
                                    .sortOption === 'date' &&
                                researchStore.listRequestParameters
                                    .sortDescending === true,
                        }"
                    />
                </div>
            </div>
            <div class="list-toolbar__filter-option">
                <span>По пациенту</span>
                <div class="list-toolbar__sort-direction">
                    <NextIcon
                        @click="
                            researchStore.setSortRequestParameters(
                                'name',
                                false
                            )
                        "
                        :class="{
                            'list-toolbar__sort-direction--active':
                                researchStore.listRequestParameters
                                    .sortOption === 'name' &&
                                researchStore.listRequestParameters
                                    .sortDescending === false,
                        }"
                    />
                    <NextIcon
                        @click="
                            researchStore.setSortRequestParameters('name', true)
                        "
                        :class="{
                            'list-toolbar__sort-direction--active':
                                researchStore.listRequestParameters
                                    .sortOption === 'name' &&
                                researchStore.listRequestParameters
                                    .sortDescending === true,
                        }"
                    />
                </div>
            </div>
            <div class="list-toolbar__filter-option">
                <span>По номеру исследования</span>
                <div class="list-toolbar__sort-direction">
                    <NextIcon
                        @click="
                            researchStore.setSortRequestParameters(
                                'number',
                                false
                            )
                        "
                        :class="{
                            'list-toolbar__sort-direction--active':
                                researchStore.listRequestParameters
                                    .sortOption === 'number' &&
                                researchStore.listRequestParameters
                                    .sortDescending === false,
                        }"
                    />
                    <NextIcon
                        @click="
                            researchStore.setSortRequestParameters(
                                'number',
                                true
                            )
                        "
                        :class="{
                            'list-toolbar__sort-direction--active':
                                researchStore.listRequestParameters
                                    .sortOption === 'number' &&
                                researchStore.listRequestParameters
                                    .sortDescending === true,
                        }"
                    />
                </div>
            </div>
        </div>
    </div>
                <div
                    class="list__items"
                    v-if="!researchStore.isNewResearchForm"
                >
                    <ResearchListItem
                        v-for="researchItem in researchStore.searchedAndSortedResearchItems.slice(
                            displayedItemsFrom,
                            displayedItemsTo
                        )"
                        :researchItem="researchItem"
                        :key="researchItem.id"
                    />
                </div>
        
                <BasePagination
                    v-if="maxPages > 1 && !researchStore.isNewResearchForm"
                    :maxPages="maxPages"
                    :currentPage="currentPage"
                    @changePage="(value) => setCurrentPage(value)"
                    class="float-right list__pagination"
                />
        
                <NewResearchForm v-if="researchStore.isNewResearchForm" />
            </div>

        </div>

    </main>
    
</body>
</html>